---
title: HashSet集合
date: 2022-03-18 00:48:39
permalink: /pages/642d0a/
categories:
  - 后端
  - Java
tags:
  - 
---
# HashSet集合

特点:

- 底层数据结构是哈希表
- 不能保证存储和取出顺序完全一致
- 没有索引,不能使用普通for循环遍历

## 原理

### 1.7版本原理

底层为哈希表 用数组+链表实现

1. 创建一个默认长度16,默认加载因 0.75 的数组,数组名为table
   - 加载因:当数组存了16*0.75=12个元素时,数组会扩容为原先的**两倍**
2. 根据元素的哈希值跟数组的长度计算出应存入的位置
3. 判断当前位置是否为null,如果是null直接存入
4. 如果不为null,则代表已有元素,则调用equals方法比较属性值
5. 如不一致,则存入数组,老元素挂在新元素下面(链表)

![image-20210723104049956](https://gitee.com/Iekrwh/md-images/raw/master/images/image-20210723104049956.png)



### 1.8版本 原理

底层结构为:哈希表 底层为数组、链表和红黑树的结合体

1.8版本优化了,当存放位置一致时,链表过长 需要对链表每个元素进行比较 当链表长度过长效率不太理想

所以在链表中添加红黑树来进行优化, 当链表长度为8时,(> 8)再添加会自动转成为红黑树 

![image-20210723104646597](https://gitee.com/Iekrwh/md-images/raw/master/images/image-20210723104646597.png)

流程图

![image-20210723104815403](https://gitee.com/Iekrwh/md-images/raw/master/images/image-20210723104815403.png)

