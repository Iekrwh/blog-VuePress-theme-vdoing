(window.webpackJsonp=window.webpackJsonp||[]).push([[283],{782:function(s,a,n){"use strict";n.r(a);var e=n(15),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"flume-对接-kafka"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#flume-对接-kafka"}},[s._v("#")]),s._v(" Flume 对接 Kafka")]),s._v(" "),n("p",[s._v("Flume输出到Kafka中")]),s._v(" "),n("p",[s._v("Flume配置文件")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("a2.sources "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" r2\na2.sinks "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" k2\na2.channels "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" c2\n\na2.sources.r2.type "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v("\na2.sources.r2.command "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" -F /opt/module/flume/datas/123.log\na2.sources.r2.shell "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /bin/bash -C\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#kafka Sink")]),s._v("\na2.sinks.k2.type "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" org.apache.flume.source.kafka.KafkaSource\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#发送topic")]),s._v("\na2.sinks.k2.kafka.topic "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" first\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#kafka地址")]),s._v("\na2.sinks.k2.kafka.bootstrap.servers "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" hadoop102:9092,hadoop103:9092,hadoop104:9092\na2.sinks.k2.kafka.flumeBatchSize "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ack模式")]),s._v("\na2.sinks.k2.kafka.producer.acks "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" all\na2.sinks.k2.kafka.producer.linger.ms "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n\n\na2.channels.c2.type "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" memory\na2.channels.c2.capacity "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\na2.channels.c2.transactionCapacity "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n\n\na2.sources.r2.channels "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" c2\na2.sinks.k2.channel "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" c2\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br")])]),n("p",[s._v("启动flume")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("flume-ng agent -n a2 -c conf/ -f datas/flume-taildir-hdfs.conf -Dflume.root.logger"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("INFO,console\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("同时flume给我们提供了 kafka source 可以从kafka指定话题中读取数据到channel中")])])}),[],!1,null,null,null);a.default=t.exports}}]);