(window.webpackJsonp=window.webpackJsonp||[]).push([[167],{496:function(t,s,r){"use strict";r.r(s);var e=r(3),v=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"kubernetes-k8s"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes-k8s"}},[t._v("#")]),t._v(" Kubernetes（K8S）")]),t._v(" "),s("p",[t._v("它是一个为 "),s("strong",[t._v("容器化")]),t._v(" 应用提供集群部署和管理的开源工具，由 Google 开发。\n"),s("strong",[t._v("Kubernetes")]),t._v(" 这个名字源于希腊语，意为“舵手”或“飞行员”。k8s 这个缩写是因为 k 和 s 之间有八个字符的关系。 Google 在 2014 年开源了 Kubernetes 项目")]),t._v(" "),s("p",[s("strong",[t._v("主要特性：")])]),t._v(" "),s("ul",[s("li",[t._v("高可用，不宕机，自动灾难恢复")]),t._v(" "),s("li",[t._v("灰度更新，不影响业务正常运转")]),t._v(" "),s("li",[t._v("一键回滚到历史版本")]),t._v(" "),s("li",[t._v("方便的伸缩扩展（应用伸缩，机器加减）、提供负载均衡")]),t._v(" "),s("li",[t._v("有一个完善的生态")])]),t._v(" "),s("h2",{attrs:{id:"不同的应用部署方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#不同的应用部署方案"}},[t._v("#")]),t._v(" 不同的应用部署方案")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Iekrwh/images/md-images/kwmxgxwp.svg",alt:"img"}})]),t._v(" "),s("h3",{attrs:{id:"传统部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#传统部署"}},[t._v("#")]),t._v(" 传统部署")]),t._v(" "),s("p",[t._v("应用直接在物理机上部署，机器资源分配不好控制，出现Bug时，可能机器的大部分资源被某个应用占用，导致其他应用无法正常运行，无法做到应用隔离。")]),t._v(" "),s("h3",{attrs:{id:"虚拟机部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#虚拟机部署"}},[t._v("#")]),t._v(" 虚拟机部署")]),t._v(" "),s("p",[t._v("在单个物理机上运行多个虚拟机，每个虚拟机都是完整独立的系统，性能损耗大。")]),t._v(" "),s("h3",{attrs:{id:"容器部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器部署"}},[t._v("#")]),t._v(" 容器部署")]),t._v(" "),s("p",[t._v("所有容器共享主机的系统，轻量级的虚拟机，性能损耗小，资源隔离，CPU和内存可按需分配")]),t._v(" "),s("h2",{attrs:{id:"k8s能解决什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#k8s能解决什么"}},[t._v("#")]),t._v(" K8S能解决什么")]),t._v(" "),s("p",[t._v("当你的应用只是跑在一台机器，直接一个 docker + docker-compose 就够了，方便轻松；\n当你的应用需要跑在 3，4 台机器上，你依旧可以每台机器单独配置运行环境 + 负载均衡器；\n当你应用访问数不断增加，机器逐渐增加到十几台、上百台、上千台时，每次加机器、软件更新、版本回滚，都会变得非常麻烦、痛不欲生，再也不能好好的摸鱼了，人生浪费在那些没技术含量的重复性工作上。")]),t._v(" "),s("p",[t._v("这时候，Kubernetes 就可以一展身手了，让你轻松管理百万千万台机器的集群。“谈笑间，樯橹灰飞烟灭”，享受着一手掌控所有，年薪百万指日可待。")]),t._v(" "),s("p",[s("strong",[t._v("Kubernetes 可以为你提供集中式的管理集群机器和应用，加机器、版本升级、版本回滚，那都是一个命令就搞定的事，不停机的灰度更新，确保高可用、高性能、高扩展。")])]),t._v(" "),s("h2",{attrs:{id:"k8s架构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#k8s架构"}},[t._v("#")]),t._v(" K8S架构")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Iekrwh/images/md-images/kwob90mh.png",alt:"img"}})]),t._v(" "),s("h3",{attrs:{id:"master"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#master"}},[t._v("#")]),t._v(" master")]),t._v(" "),s("p",[s("strong",[t._v("主节点")]),t._v("，控制平台，不需要很高性能，"),s("strong",[t._v("不跑任务")]),t._v("，通常一个就行了，也可以开"),s("strong",[t._v("多个主节点来提高集群可用度")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"worker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#worker"}},[t._v("#")]),t._v(" worker")]),t._v(" "),s("p",[s("strong",[t._v("工作节点")]),t._v("，可以是"),s("strong",[t._v("虚拟机")]),t._v("或"),s("strong",[t._v("物理计算机")]),t._v("，"),s("strong",[t._v("任务都在这里跑")]),t._v("，机器性能需要好点；通常都有很多个，可以不断加机器扩大集群；"),s("strong",[t._v("每个工作节点由主节点管理")])]),t._v(" "),s("h3",{attrs:{id:"pod"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pod"}},[t._v("#")]),t._v(" pod")]),t._v(" "),s("p",[t._v("豆荚，"),s("strong",[t._v("K8S 调度、管理的最小单位")]),t._v("，一个 Pod 可以包含"),s("strong",[t._v("一个或多个容器")]),t._v("，每个 Pod 有自己的"),s("strong",[t._v("虚拟IP")]),t._v("。一个工作节点可以有"),s("strong",[t._v("多个 pod")]),t._v("，"),s("strong",[t._v("主节点会考量负载自动调度")]),t._v(" pod 到哪个节点运行。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Iekrwh/images/md-images/kwoccq7d",alt:"img"}})]),t._v(" "),s("h3",{attrs:{id:"kubernetes-组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes-组件"}},[t._v("#")]),t._v(" Kubernetes 组件")]),t._v(" "),s("p",[s("code",[t._v("kube-apiserver")]),t._v(" "),s("strong",[t._v("API 服务器，公开了 Kubernetes API")]),t._v(" "),s("code",[t._v("etcd")]),t._v(" "),s("strong",[t._v("键值数据库，可以作为保存 Kubernetes 所有集群数据的后台数据库")]),t._v(" "),s("code",[t._v("kube-scheduler")]),t._v(" "),s("strong",[t._v("调度 Pod 到哪个节点运行")]),t._v(" "),s("code",[t._v("kube-controller")]),t._v(" "),s("strong",[t._v("集群控制器")]),t._v(" "),s("code",[t._v("cloud-controller")]),t._v(" "),s("strong",[t._v("与云服务商交互")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Iekrwh/images/md-images/kwonmx7e.png",alt:"img"}})])])}),[],!1,null,null,null);s.default=v.exports}}]);